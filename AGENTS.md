# リポジトリガイドライン

## 行動規範

- チャットでの会話・説明・提案は日本語で行うこと
- 既存コードの設計意図・構造・命名を尊重すること
- 可読性を優先し、暗黙的な構文よりも明示的な記述を選択すること
- 大規模なリファクタリングや改修は明示的に依頼がある場合にのみ行うこと
- 既存コードの変更は、特に指示がない限り本質的なロジックの修正のみに限定し、最小限の diff に留めること
- コードの変更および追加はロジックを省略せず、完全かつ実行可能な状態で提供すること
- 推測で新しい仕様を追加せず、不明点はコメントで TODO として残すこと
- ドキュメントは簡潔かつ情報密度を高く保つこと
- 常に最新のコードベースのコンテキストを参照し、変更の影響範囲を最小化すること
- デプロイ操作は必ずユーザーが実行するものとし、自動で行わないこと
- ユーザーからのデプロイ指示があった場合でも、行動規範に立ち返って再度確認を促すこと

## コーディング規約

- 命名規則は既存のスタイル (camelCase / PascalCase / snake_case) に合わせること
- 不要な import、未使用変数、未使用関数は作成しないこと
- コードコメントは対象コードの既存スタイル (日本語 / 英語、句読点、記号形式) に合わせること
  - 英語コメントが主の場合は英語で記述すること
  - 日本語コメントが主の場合は日本語で記述すること
- コメントには以下を可能な限り含めること
  - 処理の目的: 何をしているか
  - 実装の採用理由: なぜその実装にしたか
  - 実装の不採用理由: なぜ敢えてその実装にしなかったか
  - 注意点: エラー・制約・依存関係など

## レビュー規約

- ユーザーからのコード評価依頼について、明示的な指示がなければ以下の観点で評価すること
  - パフォーマンス
    - 計算量に問題のあるコードになっていないか
    - メモリ効率の悪いコードになっていないか
  - エレガンス
    - 可読性を担保できているか
    - 意図が明確かつ、冗長でない適切な長さの命名になっているか
    - コードが必要以上に重複していないか
    - コードが必要以上に冗長になっていないか
  - バグ混入リスク
    - バグの原因となるコードがないか
  - ユーザビリティ
    - ユーザーが理解しやすいエラーメッセージになっているか
- 以下は評価時点で安定していないことが想定されるため、評価指標から除外すること
  - コードコメントの妥当性

## セキュリティ

- 外部入力 (ユーザー入力、API レスポンス、環境変数等) は必ず検証またはサニタイズすること
- パスワード・トークン・認証情報をソースコードに直接埋め込まないこと
- ログに機密情報 (API キー、認証ヘッダー、個人情報) を出力しないこと
- パラメーター管理に関しては以下の判断基準に従うこと
  - 機密性の高い情報（API キー、認証情報など）は AWS Secrets Manager を利用したシークレットとして管理すること
  - 環境に依存する設定値（ホスト名、ポート番号など）は環境変数として管理すること

## リポジトリ探索

- 作業を開始する前に、必ず以下の手順でリポジトリ環境を探索すること
  - プロジェクトルートのディレクトリ構成を取得し、主要ディレクトリを把握する
  - 依頼された作業対象ファイルのパス・内容・関連ファイルを確認する
  - 依存関係や参照関係がある場合は、関連するコード・ドキュメント・設定ファイルを探索する
  - 既存の命名規則・設計意図・コーディングスタイルを確認する
  - 作業内容が他の機能や仕様に影響する場合は、その影響範囲を事前に調査する
  - 不明点や曖昧な仕様があれば、コメントで TODO を残すか、ユーザーに確認する
- 上記探索を省略せず、必ず実施した上で作業・提案・コード生成を行うこと
